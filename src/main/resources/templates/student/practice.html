<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì½”ë”©ì—°ìŠµ - CodeBattleArena</title>
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/student.css">
    <style>
        .practice-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .practice-header {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }
        
        .practice-title {
            font-size: 2.2rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 10px;
        }
        
        .practice-subtitle {
            font-size: 1.1rem;
            color: #718096;
        }
        
        .category-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 30px;
            overflow-x: auto;
            padding: 8px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }
        
        .category-tab {
            padding: 12px 24px;
            border: none;
            background: #f7fafc;
            color: #4a5568;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            white-space: nowrap;
            transition: all 0.2s;
        }
        
        .category-tab.active {
            background: #3182ce;
            color: white;
        }
        
        .category-tab:hover {
            background: #e2e8f0;
        }
        
        .category-tab.active:hover {
            background: #2c5282;
        }
        
        .problems-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .problem-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            transition: all 0.3s;
            border: 1px solid #e2e8f0;
        }
        
        .problem-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }
        
        .problem-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }
        
        .problem-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
        }
        
        .difficulty-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .difficulty-easy {
            background: #c6f6d5;
            color: #22543d;
        }
        
        .difficulty-medium {
            background: #fed7aa;
            color: #c05621;
        }
        
        .difficulty-hard {
            background: #fed7d7;
            color: #c53030;
        }
        
        .problem-description {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .problem-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: #718096;
            font-size: 0.9rem;
        }
        
        .problem-stats {
            display: flex;
            gap: 16px;
        }
        
        .problem-actions {
            display: flex;
            gap: 12px;
        }
        
        .btn-solve {
            flex: 1;
            padding: 12px 20px;
            background: #3182ce;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .btn-solve:hover {
            background: #2c5282;
        }
        
        .btn-solution {
            padding: 12px 16px;
            background: #f7fafc;
            color: #4a5568;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-solution:hover {
            background: #e2e8f0;
        }
        
        .problem-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            z-index: 1000;
        }
        
        .modal-content {
            width: 95%;
            height: 95%;
            background: white;
            margin: 2.5% auto;
            border-radius: 12px;
            display: flex;
            overflow: hidden;
        }
        
        .problem-section {
            width: 50%;
            padding: 30px;
            overflow-y: auto;
            border-right: 1px solid #e2e8f0;
        }
        
        .code-section {
            width: 50%;
            display: flex;
            flex-direction: column;
        }
        
        .code-header {
            padding: 20px 30px;
            background: #f7fafc;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .code-editor {
            flex: 1;
            padding: 20px;
            background: #1a202c;
        }
        
        .code-textarea {
            width: 100%;
            height: 100%;
            background: #2d3748;
            color: #e2e8f0;
            border: none;
            padding: 20px;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
            outline: none;
        }
        
        .code-actions {
            padding: 20px 30px;
            background: #f7fafc;
            border-top: 1px solid #e2e8f0;
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }
        
        .btn-run {
            padding: 10px 20px;
            background: #38a169;
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .btn-submit {
            padding: 10px 20px;
            background: #3182ce;
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .btn-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: #f56565;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            z-index: 10;
        }
    </style>
</head>
<body>
    <div class="student-layout">
        <div th:replace="~{common/student-sidebar}"></div>
        
        <div class="main-content">
            <div class="practice-container">
                <div class="practice-header">
                    <h1 class="practice-title">ì½”ë”©ì—°ìŠµ</h1>
                    <p class="practice-subtitle">ë‹¤ì–‘í•œ ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë¡œ ì‹¤ë ¥ì„ í–¥ìƒì‹œí‚¤ì„¸ìš”</p>
                </div>
                
                <div class="category-tabs">
                    <button class="category-tab active" data-category="all">ì „ì²´</button>
                    <button class="category-tab" data-category="array">ë°°ì—´</button>
                    <button class="category-tab" data-category="string">ë¬¸ìì—´</button>
                    <button class="category-tab" data-category="loop">ë°˜ë³µë¬¸</button>
                    <button class="category-tab" data-category="condition">ì¡°ê±´ë¬¸</button>
                    <button class="category-tab" data-category="function">í•¨ìˆ˜</button>
                    <button class="category-tab" data-category="recursion">ì¬ê·€</button>
                    <button class="category-tab" data-category="sorting">ì •ë ¬</button>
                    <button class="category-tab" data-category="search">íƒìƒ‰</button>
                    <button class="category-tab" data-category="graph">ê·¸ë˜í”„</button>
                    <button class="category-tab" data-category="dp">ë™ì ê³„íšë²•</button>
                    <button class="category-tab" data-category="greedy">ê·¸ë¦¬ë””</button>
                </div>
                
                <div class="problems-grid" id="problemsGrid">
                    <!-- ë¬¸ì œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- ë¬¸ì œ í’€ì´ ëª¨ë‹¬ -->
    <div class="problem-modal" id="problemModal">
        <button class="btn-close" onclick="closeProblemModal()">Ã—</button>
        <div class="modal-content">
            <div class="problem-section">
                <h2 id="modalProblemTitle"></h2>
                <div id="modalProblemContent"></div>
            </div>
            <div class="code-section">
                <div class="code-header">
                    <h3>ì½”ë“œ ì‘ì„±</h3>
                    <select id="languageSelect">
                        <option value="java">Java</option>
                        <option value="python">Python</option>
                        <option value="javascript">JavaScript</option>
                    </select>
                </div>
                <div class="code-editor">
                    <textarea class="code-textarea" id="codeTextarea" placeholder="ì—¬ê¸°ì— ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”..."></textarea>
                </div>
                <div class="code-actions">
                    <button class="btn-run" onclick="runCode()">ì‹¤í–‰</button>
                    <button class="btn-submit" onclick="submitCode()">ì œì¶œ</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/common/websocket.js"></script>
    <script>
        const problems = {
            array: [
                {
                    id: 1,
                    title: "ë‘ ìˆ˜ì˜ í•©",
                    difficulty: "easy",
                    description: "ë°°ì—´ì—ì„œ ë‘ ìˆ˜ì˜ í•©ì´ targetì´ ë˜ëŠ” ì¸ë±ìŠ¤ë¥¼ ì°¾ìœ¼ì„¸ìš”.",
                    solvedCount: 1234,
                    totalCount: 2000,
                    points: 10
                },
                {
                    id: 2,
                    title: "ë°°ì—´ íšŒì „",
                    difficulty: "medium",
                    description: "ë°°ì—´ì„ kë²ˆ ì˜¤ë¥¸ìª½ìœ¼ë¡œ íšŒì „ì‹œí‚¤ì„¸ìš”.",
                    solvedCount: 890,
                    totalCount: 1500,
                    points: 15
                },
                {
                    id: 3,
                    title: "ìµœëŒ€ ë¶€ë¶„ ë°°ì—´",
                    difficulty: "hard",
                    description: "ì—°ì†ëœ ë¶€ë¶„ ë°°ì—´ì˜ ìµœëŒ€ í•©ì„ êµ¬í•˜ì„¸ìš”.",
                    solvedCount: 456,
                    totalCount: 1200,
                    points: 25
                }
            ],
            string: [
                {
                    id: 4,
                    title: "íšŒë¬¸ í™•ì¸",
                    difficulty: "easy",
                    description: "ì£¼ì–´ì§„ ë¬¸ìì—´ì´ íšŒë¬¸ì¸ì§€ í™•ì¸í•˜ì„¸ìš”.",
                    solvedCount: 987,
                    totalCount: 1300,
                    points: 10
                },
                {
                    id: 5,
                    title: "ë¬¸ìì—´ ì••ì¶•",
                    difficulty: "medium",
                    description: "ì—°ì†ëœ ë¬¸ìë¥¼ ìˆ«ìë¡œ ì••ì¶•í•˜ì„¸ìš”.",
                    solvedCount: 654,
                    totalCount: 900,
                    points: 15
                }
            ],
            loop: [
                {
                    id: 6,
                    title: "êµ¬êµ¬ë‹¨ ì¶œë ¥",
                    difficulty: "easy",
                    description: "1ë¶€í„° 9ë‹¨ê¹Œì§€ êµ¬êµ¬ë‹¨ì„ ì¶œë ¥í•˜ì„¸ìš”.",
                    solvedCount: 1500,
                    totalCount: 1600,
                    points: 5
                },
                {
                    id: 7,
                    title: "ë³„ì°ê¸° íŒ¨í„´",
                    difficulty: "medium",
                    description: "ì£¼ì–´ì§„ ë†’ì´ë§Œí¼ ë³„ë¡œ ì‚¼ê°í˜•ì„ ê·¸ë¦¬ì„¸ìš”.",
                    solvedCount: 800,
                    totalCount: 1000,
                    points: 12
                }
            ],
            condition: [
                {
                    id: 8,
                    title: "í•™ì  ê³„ì‚°ê¸°",
                    difficulty: "easy",
                    description: "ì ìˆ˜ì— ë”°ë¥¸ í•™ì ì„ ê³„ì‚°í•˜ì„¸ìš”.",
                    solvedCount: 1200,
                    totalCount: 1400,
                    points: 8
                }
            ],
            function: [
                {
                    id: 9,
                    title: "íŒ©í† ë¦¬ì–¼ ê³„ì‚°",
                    difficulty: "medium",
                    description: "ì£¼ì–´ì§„ ìˆ˜ì˜ íŒ©í† ë¦¬ì–¼ì„ ê³„ì‚°í•˜ì„¸ìš”.",
                    solvedCount: 700,
                    totalCount: 900,
                    points: 15
                }
            ],
            recursion: [
                {
                    id: 10,
                    title: "í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´",
                    difficulty: "medium",
                    description: "ì¬ê·€ë¥¼ ì‚¬ìš©í•´ í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´ì„ êµ¬í˜„í•˜ì„¸ìš”.",
                    solvedCount: 600,
                    totalCount: 800,
                    points: 18
                }
            ],
            sorting: [
                {
                    id: 11,
                    title: "ë²„ë¸” ì •ë ¬",
                    difficulty: "medium",
                    description: "ë²„ë¸” ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•˜ì„¸ìš”.",
                    solvedCount: 500,
                    totalCount: 700,
                    points: 20
                }
            ],
            search: [
                {
                    id: 12,
                    title: "ì´ì§„ íƒìƒ‰",
                    difficulty: "hard",
                    description: "ì •ë ¬ëœ ë°°ì—´ì—ì„œ ì´ì§„ íƒìƒ‰ì„ êµ¬í˜„í•˜ì„¸ìš”.",
                    solvedCount: 300,
                    totalCount: 600,
                    points: 25
                }
            ],
            graph: [
                {
                    id: 13,
                    title: "DFS êµ¬í˜„",
                    difficulty: "hard",
                    description: "ê¹Šì´ ìš°ì„  íƒìƒ‰ì„ êµ¬í˜„í•˜ì„¸ìš”.",
                    solvedCount: 200,
                    totalCount: 500,
                    points: 30
                }
            ],
            dp: [
                {
                    id: 14,
                    title: "ë™ì „ êµí™˜",
                    difficulty: "hard",
                    description: "ìµœì†Œ ë™ì „ ê°œìˆ˜ë¡œ ê¸ˆì•¡ì„ ë§Œë“œì„¸ìš”.",
                    solvedCount: 150,
                    totalCount: 400,
                    points: 35
                }
            ],
            greedy: [
                {
                    id: 15,
                    title: "íšŒì˜ì‹¤ ë°°ì •",
                    difficulty: "medium",
                    description: "ìµœëŒ€ íšŒì˜ ìˆ˜ë¥¼ ë°°ì •í•˜ì„¸ìš”.",
                    solvedCount: 250,
                    totalCount: 500,
                    points: 22
                }
            ]
        };
        
        let currentCategory = 'all';
        
        document.addEventListener('DOMContentLoaded', function() {
            setupCategoryTabs();
            loadProblems();
        });
        
        function setupCategoryTabs() {
            const tabs = document.querySelectorAll('.category-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    currentCategory = this.dataset.category;
                    loadProblems();
                });
            });
        }
        
        function loadProblems() {
            const grid = document.getElementById('problemsGrid');
            let problemsToShow = [];
            
            if (currentCategory === 'all') {
                Object.values(problems).forEach(categoryProblems => {
                    problemsToShow = problemsToShow.concat(categoryProblems);
                });
            } else {
                problemsToShow = problems[currentCategory] || [];
            }
            
            grid.innerHTML = problemsToShow.map(problem => `
                <div class="problem-card">
                    <div class="problem-header">
                        <div>
                            <h3 class="problem-title">${problem.title}</h3>
                        </div>
                        <span class="difficulty-badge difficulty-${problem.difficulty}">
                            ${problem.difficulty === 'easy' ? 'ì‰¬ì›€' : problem.difficulty === 'medium' ? 'ë³´í†µ' : 'ì–´ë ¤ì›€'}
                        </span>
                    </div>
                    
                    <p class="problem-description">${problem.description}</p>
                    
                    <div class="problem-meta">
                        <div class="problem-stats">
                            <span>í•´ê²°: ${problem.solvedCount}/${problem.totalCount}</span>
                            <span>ì •ë‹µë¥ : ${Math.round(problem.solvedCount/problem.totalCount*100)}%</span>
                        </div>
                        <span class="points">+${problem.points}ì </span>
                    </div>
                    
                    <div class="problem-actions">
                        <button class="btn-solve" onclick="solveProblem(${problem.id}, '${problem.title}')">ë¬¸ì œ í’€ê¸°</button>
                        <button class="btn-solution" onclick="viewSolution(${problem.id})">ğŸ’¡</button>
                    </div>
                </div>
            `).join('');
        }
        
        function solveProblem(problemId, title) {
            document.getElementById('modalProblemTitle').textContent = title;
            document.getElementById('modalProblemContent').innerHTML = `
                <h3>ë¬¸ì œ ì„¤ëª…</h3>
                <p>ì´ê³³ì— ìƒì„¸í•œ ë¬¸ì œ ì„¤ëª…ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.</p>
                
                <h3>ì…ë ¥</h3>
                <p>ì…ë ¥ í˜•ì‹ì— ëŒ€í•œ ì„¤ëª…</p>
                
                <h3>ì¶œë ¥</h3>
                <p>ì¶œë ¥ í˜•ì‹ì— ëŒ€í•œ ì„¤ëª…</p>
                
                <h3>ì˜ˆì œ</h3>
                <div style="background: #f7fafc; padding: 15px; border-radius: 8px; margin: 10px 0;">
                    <strong>ì…ë ¥:</strong><br>
                    3 5<br>
                    <strong>ì¶œë ¥:</strong><br>
                    8
                </div>
            `;
            
            document.getElementById('codeTextarea').value = getStarterCode();
            document.getElementById('problemModal').style.display = 'block';
        }
        
        function getStarterCode() {
            const language = document.getElementById('languageSelect').value;
            
            const templates = {
                java: `public class Solution {
    public static void main(String[] args) {
        // ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”
    }
}`,
                python: `# ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”
def solution():
    pass

if __name__ == "__main__":
    solution()`,
                javascript: `// ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”
function solution() {
    
}

solution();`
            };
            
            return templates[language] || templates.java;
        }
        
        function closeProblemModal() {
            document.getElementById('problemModal').style.display = 'none';
        }
        
        function runCode() {
            alert('ì½”ë“œ ì‹¤í–‰ ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.');
        }
        
        function submitCode() {
            const code = document.getElementById('codeTextarea').value;
            if (!code.trim()) {
                alert('ì½”ë“œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ê°„ë‹¨í•œ ì„±ê³µ ì‹œë®¬ë ˆì´ì…˜
            setTimeout(() => {
                alert('ì •ë‹µì…ë‹ˆë‹¤! +15ì ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
                closeProblemModal();
            }, 1000);
        }
        
        function viewSolution(problemId) {
            alert('í•´ë‹µ ë³´ê¸° ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.');
        }
        
        // ì–¸ì–´ ë³€ê²½ ì‹œ í…œí”Œë¦¿ ë³€ê²½
        document.getElementById('languageSelect').addEventListener('change', function() {
            document.getElementById('codeTextarea').value = getStarterCode();
        });
    </script>
</body>
</html>
